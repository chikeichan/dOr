{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/dOr.js","src/testsrc.js"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","let dOr = (function(\n  windowSize = 5,\n  DOM_document = window,\n  throttleInterval\n  ){\n  let _windowSize, _document, _throttleInterval, __obj__;\n  let _window = [];\n  let _dOr_data = {\n    event: undefined,\n    x: undefined,\n    y: undefined,\n  };\n  let _callbacks = [];\n  \n  /**\n   * Root Constructor\n   * @param {[type]} windowSize   [description]\n   * @param {[type]} DOM_document [description]\n   */\n  function D(windowSize, DOM_document, throttleInterval) {\n    _windowSize = windowSize;\n    _document = DOM_document;\n    _throttleInterval = throttleInterval || 250;\n    let rootListener = function(event) {\n      // alpha: rotation around z-axis\n      // gamma: left to right\n      // beta: front back motion\n      var reading = {\n          alpha: event.alpha,\n          gamma: event.gamma,\n          beta: event.beta\n      };\n      addReading(reading);\n      this.updateData(event);\n      _callbacks.forEach((cb) => {\n        cb(_dOr_data);\n      });\n    };\n    rootListener = _throttle(rootListener, _throttleInterval);\n\n    if (_document.DeviceOrientationEvent) {\n        _document.addEventListener(\"deviceorientation\", rootListener, true);\n    };\n\n    /**\n     * Adds a reading to the _window array.\n     * @param {[type]} reading [description]\n     */\n    function addReading(reading) {\n      if (_window.length > _windowSize) {\n        _window.shift();\n      }\n      _window.push(reading);\n    }\n  }\n\n  /**\n   * \n   * @return {[type]} [description]\n   */\n  D.prototype.updateData = () => {\n    _dOr_data.event = event\n    var gammaAvg = _window.reduce(readingReducer('gamma'), 0) / _window.length;\n    var betaAvg = _window.reduce(readingReducer('beta'), 0) / _window.length;\n\n    //gamma X\n    _dOr_data.x = gammaAvg / 90;\n    //Beta y\n    _dOr_data.y = (betaAvg / 90);\n    if (Math.abs(_dOr_data.y) > 1) {\n        _dOr_data.y = (_dOr_data.y < 1) ? -1 : 1;\n    };\n\n    return _dOr_data;\n\n    function readingReducer(propName) {\n      return function(prevVal, currentVal, currentIdx, arr) {\n        return prevVal + currentVal[propName];\n      }\n    }\n  }\n\n  /**\n   * returns current dOr_data\n   * @return {[type]} [description]\n   */\n  D.prototype.getMostRecentEvent = () => {\n    return _dOr_data;\n  }\n\n  /**\n   * accepts a callback to invoke with dOr_data,\n   * and an interval to throttle that callback by\n   * @return {[type]} [description]\n   */\n  D.prototype.onTilt = (cb, throttleInterval) => {\n    let newCB = _throttle(cb, throttleInterval || 250);\n    _callbacks.push(newCB);\n  }\n\n  __obj__ = new D(windowSize, DOM_document, throttleInterval);\n  __obj__.constructor = D;\n  return __obj__;;\n\n  //Credit to: underscore library, annotated source.\n  function _throttle(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n});\nconsole.log('before exports');\n\nmodule.exports = dOr;","let dOr = require('./dOr.js');\nconsole.log('dor', dOr);\n\nlet listener = new dOr(5, window, 300);\n\n\nlistener.onTilt((data) => {\n  console.log(Date.now());\n  console.log('ON TILT :', data)}, 500);"]}